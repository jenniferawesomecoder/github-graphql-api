(this["webpackJsonpreact-github"]=this["webpackJsonpreact-github"]||[]).push([[0],{109:function(e,a,t){e.exports=t(130)},116:function(e,a,t){},117:function(e,a,t){},130:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(42),c=t.n(l),i=(t(114),t(115),t(116),t(117),t(54)),s=t(12);var o=function(){return r.a.createElement("div",{className:"App","data-testid":"notfound-page-test-id"},r.a.createElement("header",{className:"App-header"},"Not found page"))},m=t(68),d=t(139),u=t(108),p=t(140),b=t(28),v=t(33),E=t(138),f=t(133);var g=function(e){var a=e.owner,t=void 0===a?"":a,l=e.name,c=void 0===l?"":l,i=Object(n.useState)({owner:t,name:c}),o=Object(v.a)(i,2),m=o[0],d=o[1],u=Object(s.f)(),p=localStorage.getItem("github-access-key"),g=localStorage.getItem("libraries-access-key");return p&&g?r.a.createElement(E.a,{inline:!0,onSubmit:function(){return u.replace("/".concat(m.owner,"/").concat(m.name,"/"))}},r.a.createElement(E.a.Label,{srOnly:!0},"Owner"),r.a.createElement(E.a.Control,{type:"text",className:"mb-2 mr-sm-2",placeholder:"Owner",value:m.owner,onChange:function(e){return d(Object(b.a)(Object(b.a)({},m),{},{owner:e.currentTarget.value.trim()}))},"data-testid":"search-form-owner-field-test-id"}),r.a.createElement(E.a.Label,{htmlFor:"inlineFormInputGroupUsername2",srOnly:!0},"Repository name"),r.a.createElement(E.a.Control,{type:"text",className:"mb-2 mr-sm-2",placeholder:"Repository name",value:m.name,onChange:function(e){return d(Object(b.a)(Object(b.a)({},m),{},{name:e.currentTarget.value.trim()}))},"data-testid":"search-form-name-field-test-id"}),r.a.createElement(f.a,{type:"submit",disabled:!m.owner||!m.name,className:"mb-2","data-testid":"search-form-submit-button-test-id"},"Go")):r.a.createElement("em",{className:"white-color"},"Please Provide the Keys")},h=function(){var e=Object(n.useState)(""),a=Object(v.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(""),i=Object(v.a)(c,2),s=i[0],o=i[1];Object(n.useEffect)((function(){var e=localStorage.getItem("github-access-key")||"",a=localStorage.getItem("libraries-access-key")||"";l(e),o(a)}),[]);return r.a.createElement(E.a,{inline:!0,onSubmit:function(){localStorage.setItem("github-access-key",t),localStorage.setItem("libraries-access-key",s)}},r.a.createElement(E.a.Control,{type:"text",className:"mb-2 mr-sm-2",placeholder:"Github Access Key",value:t,onChange:function(e){var a=e.target.value;l(a)}}),r.a.createElement(E.a.Control,{type:"text",className:"mb-2 mr-sm-2",placeholder:"Libraries Access Key",value:s,onChange:function(e){var a=e.target.value;o(a)}}),r.a.createElement(f.a,{type:"submit",disabled:!t||!s,className:"mb-2"},"SET KEYS"))};var y=function(e){var a=e.children,t=Object(m.a)(e,["children"]).match.params,n=t.owner,l=t.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"dark",variant:"dark","data-testid":"layout-navbar-test-id"},r.a.createElement(d.a.Brand,null,"Github GraphQL"),r.a.createElement(u.a,{className:"mr-auto"},r.a.createElement(h,null)),r.a.createElement(g,{owner:n,name:l})),r.a.createElement("div",{className:"bg-light "},r.a.createElement(p.a,null,r.a.createElement(p.a.Item,{target:"_blank",href:"https://github.com/".concat(n)},r.a.createElement("i",{className:"fa fa-github text-dark"})," ",n),r.a.createElement(p.a.Item,{target:"_blank",href:"https://github.com/".concat(n,"/").concat(l)},l)),r.a.createElement("div",{className:"container-fluid"},a)))};function N(e){var a=e.component,t=(e.template,e.loginRequired,e.onlyRoles,Object(m.a)(e,["component","template","loginRequired","onlyRoles"]));return r.a.createElement(s.a,Object.assign({},t,{render:function(e){return r.a.createElement(y,e,r.a.createElement(a,e))}}))}var k=t(77),w=t(76),O=t.n(w),j=t(103),S=t(23),x=t(104);function M(){var e=Object(x.a)(["\n  query ($owner: String!, $name: String!, $cursor: String){\n    repository(owner: $owner, name: $name) {\n      id\n      name\n      description\n      homepageUrl\n      owner {\n        avatarUrl\n        id\n        ... on Organization {\n          id\n          email\n          name\n          avatarUrl\n        }\n        ... on User {\n          id\n          email\n          name\n        }\n      }\n      vulnerabilityAlerts(last: 10) {\n        nodes {\n          id\n          vulnerableRequirements\n          vulnerableManifestPath\n          securityVulnerability {\n            package {\n              name\n              ecosystem\n            }\n            vulnerableVersionRange\n            severity\n          }\n          createdAt\n        }\n      }\n      dependencyGraphManifests{\n        nodes{\n          id\n          filename\n          dependenciesCount\n          dependencies(first: 5, after: $cursor){\n            nodes {\n              packageName\n              packageManager\n              hasDependencies\n              requirements\n              repository{\n                id\n                name\n                owner {\n                  avatarUrl\n                  id\n                  ... on Organization {\n                    id\n                    email\n                    name\n                    avatarUrl\n                  }\n                  ... on User {\n                    id\n                    email\n                    name\n                  }\n                }\n              }\n            }\n            pageInfo {\n              hasNextPage\n              endCursor\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}var C=Object(S.gql)(M()),I=t(141),A=t(143),P=t(137);var R=function(e){var a=e.loading,t=e.error,n=e.children;return a?r.a.createElement("div",{className:"p-5"},r.a.createElement("h3",{className:"text-center"},r.a.createElement("i",{className:"fa fa-spin fa-spinner","data-testid":"loading-true-test-id"})," Loading ...")):t?r.a.createElement("div",{className:"p-5"},r.a.createElement(I.a,{variant:"danger"},r.a.createElement("h5",null,r.a.createElement("i",{className:"fa fa-warning"})," Error !!!"),t.graphQLErrors.map((function(e,a){var t=e.message;return r.a.createElement("div",{key:a,"data-testid":"error-message-node-test-id"},t)})))):r.a.createElement(r.a.Fragment,null,n)},G=t(134);function q(e){var a=e.repo;return r.a.createElement("div",{className:"mb-3 pt-3 pb-4 ","data-testid":"repo-details-test-id"},r.a.createElement("div",{className:"container"},r.a.createElement(G.a,null,r.a.createElement("img",{width:100,height:100,className:"mr-3",src:a.owner.avatarUrl,alt:"","data-testid":"repo-details-avatar-test-id"}),r.a.createElement(G.a.Body,null,r.a.createElement("h5",{"data-testid":"repo-details-name-test-id"},a.name),r.a.createElement("p",{"data-testid":"repo-details-description-test-id"},a.description),r.a.createElement("div",{className:"small text-muted"},r.a.createElement("span",{className:"mr-4"},r.a.createElement("i",{className:"fa fa-user"})," ",a.owner.name),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-link"})," ",a.homepageUrl))))))}var V=t(136),U=t(97),D=t(142),F=t(135);function L(e){var a,t,n,l,c,i,s=e.node,o=e.librariesData,m=e.isPackageJson,d=e.vulnerablePackages,u=o.filter((function(e){return e.name===s.packageName}))[0],p=null===s||void 0===s||null===(a=s.requirements)||void 0===a||null===(t=a.split(".")[0])||void 0===t||null===(n=t.replace("^",""))||void 0===n?void 0:n.trim(),b=null===u||void 0===u||null===(l=u.latest_release_number)||void 0===l||null===(c=l.split(".")[0])||void 0===c||null===(i=c.replace("^",""))||void 0===i?void 0:i.trim(),v="No";isNaN(p)||isNaN(b)||(v=parseInt(b)>parseInt(p)?"Yes":"No");var E=d.includes(s.packageName)?"Yes":"No";return r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{style:{width:"1%"}},r.a.createElement("i",{className:"fa fa-chevron-right"})),r.a.createElement("td",{"data-testid":"package-test-id"},r.a.createElement("img",{className:"d-inline mr-2 rounded-circle",width:20,height:20,src:s.repository.owner.avatarUrl}),r.a.createElement("a",{target:"_blank",href:"https://github.com/".concat(s.packageName)},s.packageName)),r.a.createElement("td",{className:"text-center"},s.requirements),m&&r.a.createElement("td",{className:"text-center","data-testid":"latest-release-number-test-id"},null===u||void 0===u?void 0:u.latest_release_number),m&&r.a.createElement("td",{className:"text-center","data-testid":"outdated-test-id"},v),r.a.createElement("td",{className:"text-center","data-testid":"isvulnerable-test-id"},E))}function K(e){var a=e.node,t=e.loading,n=e.loadMore,l=e.librariesData,c=e.vulnerablePackages,i="package.json"===a.filename;return r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Header,null,r.a.createElement("i",{className:"fa fa-cubes"})," Dependencies defined in"," ",r.a.createElement("b",null,a.filename)," ",r.a.createElement("span",{className:"badge badge-dark"},a.dependenciesCount)),r.a.createElement(D.a.Body,{className:"p-0"},r.a.createElement(F.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"text-center"},"Current Version"),i&&r.a.createElement("th",{className:"text-center","data-testid":"list-ispackagejson-header-test-id"},"Latest Version"),i&&r.a.createElement("th",{className:"text-center","data-testid":"list-outdated-header-test-id"},"Outdated"),r.a.createElement("th",{className:"text-center","data-testid":"list-vulnerable-header-test-id"},"Vulnerable"))),r.a.createElement("tbody",null,a.dependencies.nodes.map((function(e){return r.a.createElement("tr",{key:"".concat(e.packageManager,"/").concat(e.packageName),"data-testid":"list-nodes-element-test-id"},r.a.createElement(L,{node:e,librariesData:l,isPackageJson:i,vulnerablePackages:c}))}))),a.dependencies.pageInfo.hasNextPage&&r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"100"},r.a.createElement("div",{className:"text-center pt-2"},r.a.createElement("div",{className:"small mb-1"},a.dependenciesCount-a.dependencies.nodes.length," ","more dependencies"),r.a.createElement(f.a,{size:"sm",onClick:n,disabled:t,"data-testid":"list-loadmore-button-test-id"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-spin fa-spinner","data-testid":"list-loadmore-button-spinner-icon-test-id"})," Loading ..."):"Load more ..."," "))))))))}function _(e){var a,t,l=e.repo,c=e.networkStatus,i=e.loadMore,s=e.librariesData,o=Object(n.useState)(""),m=Object(v.a)(o,2),d=m[0],u=m[1],p=null===l||void 0===l||null===(a=l.vulnerabilityAlerts)||void 0===a||null===(t=a.nodes)||void 0===t?void 0:t.map((function(e){var a,t;return null===e||void 0===e||null===(a=e.securityVulnerability)||void 0===a||null===(t=a.package)||void 0===t?void 0:t.name}));return r.a.createElement("div",{className:"py-3 bg-white","data-testid":"dependencies-test-id"},r.a.createElement(V.a,null,l.dependencyGraphManifests.nodes.map((function(e){return r.a.createElement(U.a,{key:e.id,md:6},r.a.createElement(K,{vulnerablePackages:p,librariesData:s,node:e,loading:c===S.NetworkStatus.fetchMore&&e.filename===d,loadMore:function(){u(e.filename),i(e)}}))}))))}function $(e){var a=e.repo;return a.vulnerabilityAlerts.nodes.length<1?r.a.createElement("div",{className:"text-center p-5 bg-white","data-testid":"vulnerability-no-data-test-id"},"No data"):r.a.createElement("div",{className:"py-3 bg-white","data-testid":"vulnerability-test-id"},r.a.createElement(F.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Package"),r.a.createElement("th",null,"Requirements"),r.a.createElement("th",null,"Version Range"),r.a.createElement("th",null),r.a.createElement("th",null,"Created at"))),r.a.createElement("tbody",null,a.vulnerabilityAlerts.nodes.map((function(e){return r.a.createElement("tr",{key:e.id,"data-testid":"vulnerability-alert-node-item-test-id"},r.a.createElement("td",null,r.a.createElement("b",null,e.securityVulnerability.package.name)," ",r.a.createElement("small",{className:"text-muted"},e.vulnerableManifestPath)),r.a.createElement("td",null,e.vulnerableRequirements),r.a.createElement("td",null,e.securityVulnerability.vulnerableVersionRange),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-dark"},e.securityVulnerability.severity)),r.a.createElement("td",null,e.createdAt))})))))}var B=localStorage.getItem("libraries-access-key");var z=function(e){var a=e.match.params,t=a.owner,l=void 0===t?"":t,c=a.name,i=void 0===c?"":c,s=Object(S.useApolloClient)();s.link.options.headers.Accept="application/vnd.github.hawkgirl-preview+json";var o=Object(S.useQuery)(C,{client:s,notifyOnNetworkStatusChange:!0,variables:{owner:l,name:i}}),m=o.loading,d=o.error,u=o.data,p=o.refetch,E=o.fetchMore,f=o.networkStatus,g=Object(n.useState)([]),h=Object(v.a)(g,2),y=h[0],N=h[1];return Object(n.useEffect)((function(){p({owner:l,name:i})}),[l,i,p]),Object(n.useEffect)((function(){var e,a,t,n,r,l,c=(null===u||void 0===u||null===(e=u.repository)||void 0===e||null===(a=e.dependencyGraphManifests)||void 0===a||null===(t=a.nodes)||void 0===t||null===(n=t.filter((function(e){return"package.json"===e.filename}))[0])||void 0===n||null===(r=n.dependencies)||void 0===r||null===(l=r.nodes)||void 0===l?void 0:l.map((function(e){return e.packageName.replace("/","%2F")})))||[];!function(){var e=Object(j.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(c.map((function(e){return fetch("https://libraries.io/api/NPM/".concat(e,"?api_key=").concat(B)).then((function(e){return e.json()}))}))).then((function(e){N(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u]),l&&i?r.a.createElement(R,{loading:f!==S.NetworkStatus.fetchMore&&(m||f===S.NetworkStatus.refetch),error:d},u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{repo:u.repository}),r.a.createElement(A.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},r.a.createElement(P.a,{eventKey:"contact",title:"   ",disabled:!0}),r.a.createElement(P.a,{eventKey:"1",title:"Dependency Graph"},r.a.createElement(_,{networkStatus:f,repo:u.repository,librariesData:y,loadMore:function(e){E({variables:{cursor:e.dependencies.pageInfo.endCursor},updateQuery:function(a,t){var n=t.fetchMoreResult,r=a.repository,l=r.dependencyGraphManifests.nodes.map((function(a){if(a.filename===e.filename){var t=n.repository.dependencyGraphManifests.nodes.find((function(a){return a.filename===e.filename}))||{};return Object(b.a)(Object(b.a)({},a),{},{dependencies:{nodes:[].concat(Object(k.a)(a.dependencies.nodes),Object(k.a)(t.dependencies.nodes)),pageInfo:t.dependencies.pageInfo}})}return a}));return{repository:Object(b.a)(Object(b.a)({},r),{},{dependencyGraphManifests:Object(b.a)(Object(b.a)({},r.dependencyGraphManifests),{},{nodes:l})})}}})}})),r.a.createElement(P.a,{eventKey:"2",title:"Vulnerability Alerts"},r.a.createElement($,{repo:u.repository}))))):r.a.createElement(I.a,{variant:"info","data-testid":"repository-page-tset-id"},"Fetch repository of ",r.a.createElement("b",null,"Owner")," and ",r.a.createElement("b",null,"Repository name")," by the form")};var J=function(){return r.a.createElement(i.a,{basename:"github-graphql-api"},r.a.createElement(s.c,null,r.a.createElement(N,{exact:!0,path:"/:owner?/:name?",component:z}),r.a.createElement(N,{component:o})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=localStorage.getItem("github-access-key"),T=new S.ApolloClient({uri:"https://api.github.com/graphql",headers:{Authorization:"bearer ".concat(Q)},cache:new S.InMemoryCache});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S.ApolloProvider,{client:T},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.fc154fce.chunk.js.map